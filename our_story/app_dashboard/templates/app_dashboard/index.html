{% extends 'layout.html' %}

{% block title %}<title>{{ user.profile.get_name }}님 반갑습니다.</title>{% endblock %}

{% block content %}
<form action="{% url 'app_post:new' %}" method="post">
    {% csrf_token %}
    <div class="">
        <div class="card-header p-2 bg-main-2 rounded">{{ user.profile.get_name }} 님! 글을 작성해보세요~</div>
        <div class="input-group">
            <textarea class="form-control textarea-box" name="content"></textarea>
            <div class="input-group-append">
                <button type="submit" class="input-group-text cursor-pointer">작성</button>
            </div>
        </div>
    </div>
</form>
<div><hr></div>
{% for post in post_list %}
<div class="card mb-5">
    <div class="card-header p-2 bg-main-2 rounded"><a href="#" class="text-dark user-name">{{ post.author.profile.get_name }} </a>님의 게시글입니다.</div>
    <a href="{% url 'app_post:detail' post.id %}" class="card-body cursor-pointer content-box text-dark">{{ post.content }}</a>
    <div class="card-footer p-1">
        <span class="mx-1 cursor-pointer heart">
            <span hidden>{{ post.id }}</span>
            {% if user in post.heart_list %}
            <i class="fas fa-heart text-danger"></i>
            {% else %}
            <i class="far fa-heart"></i>
            {% endif %}
            <sup> {{ post.heart.all|length }}</sup>
        </span>
        <span class="mx-1"><i class="far fa-comment"></i>
            <sup> {{ post.comment.all|length }}</sup></span>
        <span class="float-right">{{ post.created|date:'Y-m-d H:i' }}</span>
    </div>
</div>
{% endfor %}


{% load staticfiles %}
<script src="{% static 'js/post.js' %}"></script>
{% endblock %}